## 蛋黄人肉鸽游戏开发 Roadmap

> 目标：基于现有 FlappyBird 微信小游戏工程，开发一款关卡制肉鸽游戏。  
> 节奏：优先做出“完整一局可玩”的最小版本（MVP），再逐步扩展内容与打磨数值。

---

## 阶段 0：工程搭建与基础框架（约 1 周）

- **0-1 新建模块目录**
  - 在 Unity 工程中新建 `EggRogue` 相关目录：
    - `Assets/EggRogue/Scripts`
    - `Assets/EggRogue/Prefabs`
    - `Assets/EggRogue/UI`
    - `Assets/EggRogue/Configs`
  - 与原 `FlappyBrid` 目录隔离，方便维护。

- **0-2 场景与流程骨架**
  - 创建 `MainMenu` 场景：包含“开始游戏”按钮。
  - 创建 `GameScene` 场景：作为战斗主场景。
  - 简单 `GameManager`：
    - `MainMenu` → `GameScene`
    - `GameScene` 结束 → 回 `MainMenu`

- **0-3 微信平台验证**
  - 使用最简单物体（方块角色 + 几个敌人占位）构建一版微信小游戏。
  - 确认：
    - 新场景可以正常加载。
    - 输入/渲染在微信端正常工作。

---

## 阶段 1：角色 & 属性系统（约 1–2 周）

- **1-1 角色原型**
  - 制作一个基础“蛋黄人” Prefab（可用简易美术/占位图）。
  - 实现基础移动控制（键盘或触屏）。
  - 简单攻击逻辑（近战挥砍或自动射击占位）。

- **1-2 属性系统搭建**
  - 设计 `StatBlock`（属性面板）：
    - 基础属性：`HP、Attack、AttackSpeed、MoveSpeed、CritChance、CritDamage、Luck` 等。
    - 支持未来扩展更多属性。
  - 在 Inspector 中可配置各项属性。
  - 在运行时，通过一个简单 UI 显示当前属性（例如左上角面板）。

- **1-3 角色配置**
  - 使用 ScriptableObject 定义 `EggCharacterConfig`：
    - 职业 ID、名称、立绘/图标。
    - 初始属性（引用 `StatBlock` 或属性字段）。
  - `CharacterLoader`：
    - 根据玩家选择的职业加载对应配置。
    - 应用到角色 Prefab 的属性系统中。

**阶段 1 里程碑**：  
主菜单 → 选择一个蛋黄人职业 → 进入游戏 → 可以移动/攻击，并在 UI 上看到血量等属性。

---

## 阶段 2：战斗核心 & 怪物系统（约 2 周）

- **2-1 怪物基础**
  - 制作 1–2 种小怪 Prefab。
  - 简单 AI 行为：
    - 近战：向玩家持续移动并攻击。
    - 远程：在一定距离外发射子弹。
  - 敌人共用同一套属性系统（HP、Attack 等）。

- **2-2 武器与伤害系统**
  - 定义 `Weapon`：
    - 使用 ScriptableObject 配置：伤害、射速、弹速、子弹数量等参数。
  - 子弹系统：
    - 子弹飞行、碰撞检测。
    - 命中敌人 → 调用统一的伤害结算逻辑（考虑暴击、加成等）。
  - 敌人死亡：
    - 播放死亡动画/特效。
    - 从场景移除。

- **2-3 单关战斗循环**
  - 在 `GameScene` 中按固定配置刷怪（例如一批小怪 + 一只精英）。
  - 玩家清光所有敌人：
    - 弹出“胜利”面板。
  - 玩家被击杀：
    - 弹出“失败”面板。
  - 面板提供“重开本关 / 返回主菜单”按钮。

**阶段 2 里程碑**：  
完成“单关战斗 Demo”——能打怪、能赢、能输，形成最基础闭环。

---

## 阶段 3：基础肉鸽循环（奖励 + 多关）（约 2–3 周）

- **3-1 关卡与难度曲线雏形**
  - 设计 `StageConfig`：
    - 关卡编号。
    - 敌人种类和数量（或刷怪模板引用）。
    - 难度系数（血量系数 / 伤害系数 / 数量系数）。
  - 设计一条简单的“全局难度曲线”：
    - 敌人血量和伤害随关卡编号递增。
  - 实际数值 = 全局曲线 * 关卡系数 * 敌人自身系数。

- **3-2 奖励/天赋基础系统**
  - 使用 ScriptableObject 定义 `PerkConfig`：
    - ID、名称、描述、图标。
    - 类型：属性加成（加攻、加血、攻速…）等。
    - 数值、稀有度、权重。
  - 编写 `RewardGenerator`：
    - 根据当前关卡编号，从奖励池中按权重随机生成 3 个备选天赋。
  - 奖励选择 UI：
    - 以卡片形式显示 3 个天赋。
    - 玩家从中选择 1 个，应用到角色属性。

- **3-3 多关流程打通**
  - 战斗胜利 → 结算界面 → 奖励选择界面。
  - 选择完奖励后：
    - 更新角色属性。
    - 自动加载下一关 `StageConfig`。
  - 先实现 10 关左右的线性流程（之后再扩展到 20 关）。

**阶段 3 里程碑**：  
完整体验“小型肉鸽循环”：第 1 关 → 多次奖励选择 → 打到第 N 关 → 显示本局总结并回主菜单。

---

## 阶段 4：职业差异化 & 武器系统扩展（约 2–3 周）

- **4-1 多职业玩法设计**
  - 从脑图中选择 3–4 个代表职业，例如：
    - 坦克型（高 HP、高防御、减伤被动）。
    - 远程输出型（高攻击、暴击、射速）。
    - 治疗/辅助型（回复、护盾、队友增益）。
  - 在 `EggCharacterConfig` 中配置：
    - 不同初始属性曲线。
    - 职业被动效果（如增加火焰伤害、增加回复量）。

- **4-2 武器多样化**
  - 设计 3–4 把风格不同的武器：
    - 单发高伤。
    - 连射低伤。
    - 散射弹幕。
    - 穿透/反弹/范围爆炸武器。
  - 配置武器和职业的联动：
    - 某些武器仅对特定职业开放，或在特定职业手里有额外效果。

- **4-3 角色 & 武器选择流程完善**
  - 主菜单新增：
    - 角色选择界面（职业列表 + 属性展示 + 简要定位标签）。
    - 武器选择界面（可推荐与职业搭配的武器）。
  - 完整流程：
    - 主菜单 → 选职业 → 选武器/初始天赋 → 进入第 1 关。

**阶段 4 里程碑**：  
玩家可以选择不同职业 + 武器组合，进入游戏后明显感受到玩法风格不同。

---

## 阶段 5：可控随机 & 难度精细化（约 2–3 周）

- **5-1 天赋池与条件过滤**
  - 为天赋添加标签：
    - 职业系（战士系、法师系…）。
    - 武器系（近战、远程、火焰、冰霜…）。
    - 阶段系（前期/中期/后期常见）。
  - `RewardGenerator` 增加过滤逻辑：
    - 根据当前职业、武器、已选天赋、关卡区间过滤可选天赋。
    - 不同阶段使用不同天赋池和权重。
  - 加入简单的“纠正机制”：
    - 长时间未给出回复类天赋时，在下一次选项中强制加入一个。

- **5-2 刷怪模板与伪随机**
  - 设计“刷怪模板”（SpawnTemplate）：
    - 普通模板：小怪为主。
    - 精英模板：少量精英 + 小怪。
    - 远程模板：远程怪偏多。
  - 每关配置若干模板及其权重：
    - 关卡开始时随机抽取 1 个模板实例化。
  - 启用伪随机种子：
    - 每局根据种子控制关卡模板选择和奖励，便于复盘和调试。

- **5-3 难度调节工具**
  - 在 Editor 中制作开发者调试面板：
    - 可以实时修改某一关的：
      - 敌人血量系数。
      - 敌人伤害系数。
      - 敌人数量/刷新频率。
    - 可以重载本关并快速开战测试。

**阶段 5 里程碑**：  
你可以通过调整曲线和权重，明显控制：
- 游戏整体变难/变简单；
- 某一关特意增强/削弱；
- 某类天赋出现频率的高低。

---

## 阶段 6：内容扩充 & 体验打磨（持续迭代）

- **6-1 扩展职业 / 武器 / 天赋**
  - 在现有系统上逐步增加：
    - 新职业：结合你的美术与脑图，设计新的职业特性。
    - 新武器：更多射击方式和手感。
    - 新天赋：尤其是能改变打法的“玩法型天赋”。
  - 每增加一批内容后，都自测几局，微调数值平衡。

- **6-2 敌人种类 & Boss 设计**
  - 新增具有特色机制的敌人：
    - 冲锋怪、分裂怪、护盾怪、治疗怪等。
  - 每若干关设计一个 Boss：
    - 具有阶段变化、特殊弹幕或场地机制。

- **6-3 账号成长 & 解锁系统**
  - 设计轻量“跨局成长”：
    - 通关/累计游戏次数/成就 → 解锁新职业、新武器、新外观。
    - 小幅总体属性加成（避免破坏肉鸽构筑的乐趣）。
  - 成就与图鉴系统：
    - 收集不同职业、武器、敌人信息。

- **6-4 美术与表现强化**
  - 将占位资源替换为正式蛋黄人美术、动画、特效。
  - 优化 UI 动画、打击反馈、音效/BGM 等，提升整体品质感。

---

## 阶段 7：微信小游戏优化 & 发布准备

- **7-1 性能与包体优化**
  - 使用对象池管理子弹与敌人。
  - 合并贴图、减少材质和 Draw Call。
  - 控制音效数量与并发通道，减少卡顿和发热。

- **7-2 平台特性接入（可选）**
  - 微信登录、排行榜。
  - 分享、邀请机制。
  - 激励广告、结算广告等商业化功能（如有需要）。

- **7-3 新手引导与版本封包**
  - 设计精简的新手引导：
    - 基本移动/攻击/躲避/选奖励的说明。
  - 全面真机测试（多机型）。
  - 修复崩溃与严重 Bug，准备上线版本。

---

## 使用建议

- 每次开始一个阶段前，先选好“本周只做哪几件事”，避免目标过多。
- 遇到具体实现问题（脚本、组件、配置表）时：
  - 把需求和当前代码结构发给 AI，让 AI 生成对应 C# 脚本和使用说明。
- 优先保证：**核心循环顺畅 > 数值精细 > 内容数量**，循序渐进地扩展游戏。

