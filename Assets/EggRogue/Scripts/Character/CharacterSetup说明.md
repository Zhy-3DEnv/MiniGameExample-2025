# 角色控制器设置说明

本文档说明如何在Unity中设置角色控制器，让角色能够移动。

---

## 一、基础设置

### 步骤1：给角色添加 Rigidbody 和 CharacterController 脚本

1. 在 GameScene 中，找到你的角色对象（例如胶囊体）
2. 选中角色对象，在 Inspector 中：
   - 添加组件：`Rigidbody`
   - 添加组件：`Character Controller`（我们的脚本）

### 步骤2：配置 Rigidbody（如果使用物理移动）

如果使用物理移动（推荐），设置 Rigidbody：
- `Use Gravity`: 取消勾选（如果是俯视角2D游戏，不需要重力）
- `Freeze Rotation`: 勾选 X、Y、Z（防止角色翻滚）
- `Interpolate`: 选择 `Interpolate`（使移动更平滑）

### 步骤3：配置 CharacterController 脚本

在 Inspector 中设置：
- `Move Speed`: 5（默认移动速度，可以根据需要调整）
- `Use Physics`: 勾选（推荐使用物理移动，更平滑）
- `Use Bounds`: 根据需要勾选（是否限制移动范围）
- `Min X / Max X / Min Z / Max Z`: 如果勾选了 Use Bounds，设置移动边界

---

## 二、测试移动

1. 运行游戏，进入 GameScene
2. 使用键盘测试：
   - `W / ↑` 键：向前移动
   - `S / ↓` 键：向后移动
   - `A / ←` 键：向左移动
   - `D / →` 键：向右移动
   - 组合键：对角线移动

---

## 三、常见问题

### Q: 角色移动不顺畅？
A: 检查：
- `Use Physics` 是否勾选（物理移动更平滑）
- Rigidbody 的 `Interpolate` 是否设置为 `Interpolate`
- `Move Speed` 是否合适（太小太慢，太大可能抖动）

### Q: 角色移动方向不对？
A: 检查：
- 相机视角（如果是俯视角，移动应该在XZ平面）
- 如果需要2D游戏（XY平面），需要修改脚本中的移动逻辑

### Q: 角色移动后停不下来？
A: 检查：
- Rigidbody 的 `Drag`（阻力）可以设置一个较小值（如0.5）
- 或者使用脚本中的 `StopMovement()` 方法

### Q: 触屏输入不工作？
A: 
- 当前脚本的触屏输入部分还未完全实现，主要支持键盘输入
- 后续可以扩展为虚拟摇杆或拖拽移动

---

## 四、后续扩展

当你需要添加更多功能时：

1. **属性系统集成**：
   - 从角色的属性系统读取 `MoveSpeed`，调用 `SetMoveSpeed()`
2. **动画**：
   - 使用 `IsMoving()` 判断是否移动，播放移动动画
   - 使用 `GetCurrentMoveSpeed()` 控制动画速度
3. **触屏输入**：
   - 实现虚拟摇杆
   - 或拖拽移动（点击屏幕某个位置，角色移动过去）
4. **技能/攻击**：
   - 在角色控制器中添加攻击方法
   - 或创建单独的 `WeaponController` 脚本

---

## 五、注意事项

- **相机设置**：确保相机是俯视或固定角度，移动逻辑假设是XZ平面移动
- **边界限制**：如果不限制边界，角色可能移动到场景外，后续可以添加边界检测
- **性能**：当前实现比较简单，性能开销低，适合微信小游戏
