# 金币与 2 枪击杀设置说明

## 一、2 枪打死敌人

- **敌人**：`Health` 组件 `Max Health` = **20**
- **玩家**：`PlayerCombatController` 的 `Damage Per Shot` = **10**  
  子弹通过 `Projectile.Initialize( direction, damagePerShot )` 使用该伤害。

因此 2 枪造成 20 点伤害，刚好击杀。

## 二、金币系统

### 1. GoldManager

1. 在 **GameScene** 中建空物体，命名为 `GoldManager`
2. 添加组件：`Gold Manager`
3. 无需额外配置（单例自动工作）

若希望金币跨场景保留，可把 `GoldManager` 放到 `DontDestroyOnLoad` 的物体下（如 GameManager 所在根物体）。

### 2. 金币 Prefab（Coin）

1. 建 **Sphere**，Scale 约 `0.15, 0.15, 0.15`，命名 `Coin`
2. 添加组件：
   - `Coin`：`Value` = **1**
   - `Sphere Collider`：勾选 **Is Trigger**，**Radius** = **0.2**（对应 0.2m 收集范围）
3. 将 `Coin` 拖到 `Assets/EggRogue/Prefabs/` 做成 Prefab，然后删掉场景里的实例

### 3. 敌人掉落金币

1. 选中 **Enemy** Prefab
2. 在 `Enemy Controller` 中：
   - `Coin Prefab`：拖入上面的 **Coin** Prefab
   - `Coin Drop Min` = **1**，`Coin Drop Max` = **2**
   - `Coin Drop Radius` = **0.3**（可选，避免多枚金币重叠）

### 4. 玩家收集与 UI

- 玩家需有 **Tag** `Player` 且带 **Collider**（如 Capsule），才能触发 Coin 的 `OnTriggerEnter`。
- **GameHudPanel**：
  - 在 HUD 下建 **Text**（UnityEngine.UI.Text），用于显示金币
  - 将该 Text 拖到 `Game Hud Panel` 的 `Gold Text` 引用
- `GameHudPanel` 已订阅 `GoldManager.OnGoldChanged`，收集金币后会自动刷新 `金币: N`。

### 5. 流程简述

1. 敌人死亡 → `EnemyController.OnEnemyDeath` → `DropCoins()` 生成 1–2 个 Coin
2. 玩家靠近 Coin 0.2m 内 → `Coin.OnTriggerEnter` → `GoldManager.AddGold(1)` → 销毁 Coin
3. `GoldManager` 触发 `OnGoldChanged` → `GameHudPanel` 更新 `goldText`

## 三、检查清单

- [ ] 敌人 `Health.maxHealth` = 20，`PlayerCombatController.damagePerShot` = 10（2 枪击杀）
- [ ] 场景中有 `GoldManager` 对象
- [ ] Coin Prefab 含 `Coin` + `Sphere Collider`（Is Trigger, Radius 0.2）
- [ ] Enemy Prefab 的 `Coin Prefab` 已指定
- [ ] 玩家 Tag = `Player` 且挂有 Collider
- [ ] `GameHudPanel` 的 `Gold Text` 已绑定
